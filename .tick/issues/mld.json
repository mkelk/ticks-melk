{
  "acceptance_criteria": "- [ ] Command parses tick ID from positional arg\n- [ ] Command errors if tick not awaiting human\n- [ ] Command sets verdict=approved and triggers processing\n- [ ] Command outputs result (closed vs returned to agent)\n- [ ] --json flag works\n- [ ] Error codes follow existing patterns",
  "blocked_by": [
    "pgg",
    "5v7",
    "d2f",
    "t0a"
  ],
  "closed_at": "2026-01-14T16:45:24.398288Z",
  "closed_reason": "Implemented tk approve command in cmd/tk/main.go: added runApprove function that parses tick ID, verifies tick is awaiting human decision, sets verdict=approved, calls ProcessVerdict for state transition, saves tick, and outputs result. Supports --json flag. Added comprehensive tests covering error cases (no ID, not found, not awaiting) and success cases (approval closes, checkpoint returns to agent, manual tick approval).",
  "created_at": "2026-01-14T16:16:31.33019Z",
  "created_by": "peter@engelbrecht.dk",
  "description": "Add new 'approve' command to cmd/tk/main.go\n\nUsage: tk approve \u003cid\u003e\n\nBehavior:\n1. Parse tick ID from positional argument\n2. Load the tick\n3. Verify tick has awaiting set (error if not awaiting human)\n4. Set verdict = \"approved\"\n5. Call verdict processing logic (triggers state transition)\n6. Save tick\n7. Output result (tick closed or returned to agent)\n\nImplementation pattern:\n- Add case \"approve\" to main switch\n- Create runApprove(args []string, stdout, stderr io.Writer) int\n- Follow existing command patterns (FlagSet, parseInterleaved, etc.)\n- Support --json flag for machine-readable output\n\nError cases:\n- No ID provided (exit code 2)\n- Tick not found (exit code 4)\n- Tick not awaiting human (error message, suggest checking status)",
  "id": "mld",
  "owner": "peter@engelbrecht.dk",
  "parent": "cuf",
  "priority": 1,
  "status": "closed",
  "title": "Implement tk approve command",
  "type": "task",
  "updated_at": "2026-01-14T16:45:24.398288Z"
}