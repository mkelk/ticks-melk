{
  "id": "zxm",
  "title": "Add integration tests for attachment workflow",
  "description": "Add tests for the attachment feature.\n\n## Unit Tests\n\n### internal/tick/tick_test.go\n- TestAddAttachment\n- TestRemoveAttachment\n- TestGetAttachment\n- TestAttachmentIDGeneration\n- TestTickJSONWithAttachments\n- TestTickJSONBackwardCompatibility\n\n### cmd/tk/cmd/attach_test.go\n- TestValidateImageFile (magic bytes check)\n- TestFileSizeValidation\n- TestAttachmentIDUniqueness\n\n## Integration Tests\n\n### Manual test script\nCreate test-attachments.sh:\n```bash\n#!/bin/bash\n# Test attachment workflow\n\n# Create test tick\nID=$(tk create \"Test attachments\" --json | jq -r '.id')\n\n# Create test image\nconvert -size 100x100 xc:red /tmp/test.png\n\n# Attach\ntk attach $ID /tmp/test.png -d \"Test image\"\n\n# Verify in show\ntk show $ID | grep -q \"ðŸ“Ž\" || echo \"FAIL: attachment not in show\"\n\n# List\ntk attachments $ID\n\n# Detach\nATT_ID=$(tk attachments $ID --json | jq -r '.attachments[0].id')\ntk detach $ID $ATT_ID\n\n# Verify removed\ntk show $ID | grep -q \"ðŸ“Ž\" \u0026\u0026 echo \"FAIL: attachment still in show\"\n\n# Cleanup\ntk delete $ID --force\n\necho \"Tests passed\"\n```\n\n## Worker Tests\n\nIn tickboard.dev repo:\n- Test upload with valid token\n- Test upload with invalid token (401)\n- Test upload with oversized file (413)\n- Test upload with invalid file type (415)\n- Test R2 storage and retrieval\n- Test URL accessibility",
  "status": "open",
  "priority": 3,
  "type": "task",
  "owner": "peter@engelbrecht.dk",
  "parent": "7ab",
  "created_by": "peter@engelbrecht.dk",
  "created_at": "2026-01-21T16:23:30.35007Z",
  "updated_at": "2026-01-21T16:23:30.35007Z"
}