{
  "id": "ky7",
  "title": "Add ParentBranch field and metadata helpers with tests",
  "description": "Add ParentBranch tracking to Worktree struct and metadata file read/write.\n\nFiles to modify:\n- internal/worktree/worktree.go\n\nImplementation:\n1. Add ParentBranch string field to Worktree struct (line 31-36)\n2. Add metadataFileName constant (\".tk-metadata\")\n3. Add worktreeMetadata struct with ParentBranch and CreatedAt fields\n4. Add getCurrentBranch(repoRoot string) helper - returns current branch, or empty for detached HEAD\n5. Add writeMetadata(wtPath string, meta worktreeMetadata) error helper\n6. Add readMetadata(wtPath string) string helper - returns ParentBranch or empty if missing/corrupt\n7. Extract branchExists() to package-level function branchExists(repoRoot, branch string) bool\n8. Update Manager.branchExists() to call the package-level function\n\nTests to write in worktree_test.go:\n1. TestManager_Create_RecordsParentBranch - create worktree from feature branch, verify ParentBranch set\n2. TestManager_Create_DetachedHead - create from detached HEAD, verify ParentBranch empty\n\nWrite tests alongside implementation.",
  "status": "open",
  "priority": 2,
  "type": "task",
  "owner": "morten@elk.dk",
  "blocked_by": [
    "a5w"
  ],
  "parent": "juc",
  "acceptance_criteria": "go test ./internal/worktree/... -run TestManager_Create_RecordsParentBranch -v passes; go test ./internal/worktree/... -run TestManager_Create_DetachedHead -v passes",
  "created_by": "morten@elk.dk",
  "created_at": "2026-01-22T05:52:09.044834Z",
  "updated_at": "2026-01-22T05:52:09.044834Z"
}